# מדריך החלטות — מה לתת לקלוד קוד לבחור ומה לכתיב לו

> פרויקט: SmartShopper & Logistics OS

---

## הכלל המרכזי

חלק כל החלטה לאחת משתי קטגוריות:

| קטגוריה | שאלה לשאול את עצמך | מי מחליט |
|----------|---------------------|-----------|
| החלטה עסקית | "האם זה קשור לאיך העסק שלי עובד?" | **אתה** |
| החלטה טכנית | "האם זה קשור לאיך הקוד בנוי פנימית?" | **קלוד קוד** |

---

## עמודה א׳ — מה אתה מכתיב לקלוד (אל תשנה)

אלה החלטות עסקיות שקלוד לא יכול לדעת בלעדיך:

### ממשק משתמש
- התקשורת עם הלקוח היא **דרך טלגרם בלבד**
- הפלט הוא תמיד **5 אפציות** — לא פחות, לא יותר
- כל אפציה חייבת להציג: מחיר מוצר + עלות שיליחויות = סה״כ
- שני כפתורי פעולה: `🌐 קנייה ישירה` ו-`🚚 הזמן שיליחויות`

### שותף עסקי
- חברת המשלוחים היא **שיליחויות בע״מ** — זה לא ניתן להחלפה
- נוסחת התמחור קבועה:
  ```
  עלות משלוח = (50 ₪ + מרחק_בקמ × 3 ₪) × מקדם_גודל
  ```
- מקדמי גודל: S=1.0 | M=1.5 | L=2.5 | XL=4.0

### תזמון ודיווח
- דו״ח יומי יוצא בדיוק ב-**23:00 שעון ירושלים**
- הדו״ח הולך ל**מייל שלך** — לא לאפליקציה אחרת
- הדו״ח חייב לכלול: כמות חיפושים, מוצרים מבוקשים, יחס המרה

### היקף חיפוש
- המערכת סורקת **לפחות 15 אתרים** בכל חיפוש
- מחלצת חובה: מחיר, כתובת חנות פיזית, מידות מוצר

---

## עמודה ב׳ — מה קלוד קוד בוחר בעצמו (תן לו חופש)

אלה החלטות טכניות — קלוד מומחה בהן יותר ממך:

### בניית הקוד הפנימי
- איך בדיוק לבנות כל Workflow בתוך n8n
- איזו ספרייה Python לחישובי מרחק ומיון
- איך לבנות את מבנה ה-JSON שעובר בין הרכיבים
- כמה משתנים ביניים ליצור בכל שלב

### טיפול בשגיאות
- מה לעשות כשאתר חסום לגרידה
- כמה פעמים לנסות שוב לפני שמוותרים
- איזה הודעת שגיאה לשלוח ללקוח בטלגרם

### בדיקות (Tests)
- איך לבנות את הטסטים
- אילו מקרי קצה לבדוק
- איך לארגן את תיקיית הטסטים

### ביצועים
- כמה בקשות להריץ במקביל
- איך לנהל תור כשיש עומס
- כמה זמן לשמור נתונים ב-cache

---

## איך לנסח בקשות לקלוד קוד בפועל

### ❌ בקשה לא טובה
```
בנה לי את מנוע הלוגיסטיקה
```
**למה רע:** קלוד יבחר נוסחת תמחור מהדמיון שלו. לא תמצא אחר כך את הבאג.

---

### ✅ בקשה טובה
```
בנה את מנוע הלוגיסטיקה לפי הכללים הבאים:

הכרחי (אל תשנה):
- נוסחה: (50 + מרחק × 3) × מקדם_גודל
- מקדמים: S=1.0, M=1.5, L=2.5, XL=4.0
- פלט: מספר בשקלים, מעוגל לשלם

חופשי לבחור:
- מבנה הקוד הפנימי
- שמות המשתנים
- איך לטפל בקלט שגוי
```

---

### ❌ בקשה לא טובה
```
כתוב את הקוד לשליחת הודעות טלגרם
```
**למה רע:** קלוד אולי יבחר פורמט שונה ממה שהגדרת.

---

### ✅ בקשה טובה
```
כתוב את הקוד לשליחת הודעות טלגרם לפי הפורמט הזה:

הכרחי (אל תשנה):
- תמיד 5 תוצאות בדיוק
- כל תוצאה: שם | חנות | מחיר | עלות שיליחויות | סה"כ | מרחק | זמן
- שני כפתורים לכל תוצאה: קנייה ישירה + הזמן שיליחויות
- ממוין מהזול לביקר לפי סה"כ

חופשי לבחור:
- הספרייה לשליחת הודעות
- איך לבנות את ה-markup
- טיפול בשגיאות שליחה
```

---

## סדר עבודה מומלץ עם קלוד קוד

```
שלב 1 — הצג לו את CLAUDE.md
        ↓
שלב 2 — בקש ממנו להציע ארכיטקטורה (הוא בוחר)
        ↓
שלב 3 — אשר או תקן לפי עמודה א׳ למעלה
        ↓
שלב 4 — בנה רכיב אחד בכל פעם (לא הכל ביחד)
        ↓
שלב 5 — בדוק עם simulate_request.py לפני הבא
        ↓
שלב 6 — חזור על 4-5 עד שהמערכת עובדת
```

---

## נספח — הפרומפט הראשוני המלא לשיחה חדשה עם קלוד קוד

העתק את זה בדיוק כשאתה פותח שיחה חדשה:

```
קרא את CLAUDE.md בתיקיית הפרויקט לפני שאתה עושה כלום.

אני רוצה לבנות את [שם הרכיב].

מה שקבוע ואסור לשנות:
[העתק כאן את הסעיפים הרלוונטיים מעמודה א׳]

מה שאתה חופשי לבחור:
[העתק כאן את הסעיפים הרלוונטיים מעמודה ב׳]

לפני שאתה כותב קוד — הצג לי תוכנית קצרה ב-5 שורות 
של מה אתה מתכוון לעשות. אני אאשר ואז תתחיל.
```

---

*SmartShopper & Logistics OS | מדריך החלטות v1.0 | פברואר 2026*
